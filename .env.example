# MCP Nexus example environment file
#
# Copy this file to `.env` and update values:
#   cp .env.example .env
#
# Notes:
# - `KEY_ENCRYPTION_SECRET` MUST stay stable once you store API keys in the DB.
# - `ADMIN_API_TOKEN` is the bearer token used to access Admin UI/Admin API.

# -----------------------------
# Required configuration
# -----------------------------

# Database (SQLite recommended for simple self-hosting)
DATABASE_URL=file:/data/tavily_bridge.db

# 32-byte encryption key (accepts 64-char hex OR base64 that decodes to 32 bytes)
# Generate (base64):
#   node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
#
# Leave blank to have the Docker entrypoint generate + persist one under /data.
KEY_ENCRYPTION_SECRET=

# Admin bearer token
# Generate (hex):
#   node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
#
# Leave blank to have the Docker entrypoint generate + persist one under /data.
ADMIN_API_TOKEN=

# Server bind address / port
HOST=0.0.0.0
PORT=8787

# -----------------------------
# Optional: upstream provider keys
# (can also be managed in the Admin UI)
# -----------------------------

# Tavily API key (example format: tvly-...)
# TAVILY_API_KEY=

# Brave Search API key (example format starts with: BSA...)
# BRAVE_API_KEY=

# -----------------------------
# Optional: security / auth
# -----------------------------

# If set, used to HMAC-hash stored query strings in usage logs (recommended for production)
# TAVILY_USAGE_HASH_SECRET=
# BRAVE_USAGE_HASH_SECRET=

# If true, allows client auth via query param token on /mcp (default false)
# ENABLE_QUERY_AUTH=false

# -----------------------------
# Optional: rate limiting
# -----------------------------

# MCP_RATE_LIMIT_PER_MINUTE=60
# MCP_GLOBAL_RATE_LIMIT_PER_MINUTE=600
# ADMIN_KEY_REVEAL_RATE_LIMIT_PER_MINUTE=20
# MCP_MAX_RETRIES=2
# MCP_COOLDOWN_MS=60000

# -----------------------------
# Optional: search behavior
# -----------------------------

# SEARCH_SOURCE_MODE=brave_prefer_tavily_fallback
# TAVILY_KEY_SELECTION_STRATEGY=round_robin
# ENABLE_TAVILY_CREDITS_CHECK=true
# BRAVE_OVERFLOW=
# BRAVE_MAX_QUEUE_MS=30000
